<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClassName</title>
  <style>
  table {
    border: 1px solid #000;
    border-collapse: collapse;
    margin: auto;
  }
  th, td {
    border: 1px solid #000;
    padding: 10px;
  }
  .on {
    background-color: cornflowerblue;
    color: white;
  }
  .subject-font {
    font-family: 궁서;
  }
  </style>
</head>
<body>
  <h1>ClassName</h1>
  <table>
    <tr>
      <th colspan="3">
        <h2>수강신청</h2>
      </th>
    </tr>
    <tr>
      <th colspan="3">
        <input type="checkbox" id="checkAll" onchange="fnCheckAll();">
        <label for="checkAll">모두선택/해제</label>
      </th>
    </tr>
    <!-- tr>td>input:checkbox[name=subject][value]#subject$+label[for=subject$] -->
    <tr>
      <td class="subject-font">
        <input type="checkbox" name="subject" id="subject1" value="국어" onchange="fnCheckSubject(this);">
        <label for="subject1">국어</label>
      </td>
      <td class="subject-font">
        <input type="checkbox" name="subject" id="subject2" value="영어" onchange="fnCheckSubject(this);">
        <label for="subject2">영어</label>
      </td>
      <td class="subject-font">
        <input type="checkbox" name="subject" id="subject3" value="수학" onchange="fnCheckSubject(this);">
        <label for="subject3">수학</label>
      </td>
    </tr>
  </table>

  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

  <script>
  // 모든 html요소가 DOM으로 등록된 이후에 script실행
  /**
   * this용법1 - html tag안에서 this는 현재 태그객체를 가리킨다.
   */ 
  function fnCheckSubject(subject){
    // console.log(subject);
    
    // 부모 td 찾기
    // console.dir(subject.parentElement);
    let parent = subject.parentElement;

    // 부노 td에 className .on을 추가/제거
    if(subject.checked)
      parent.classList.add('on');
    else
      parent.classList.remove('on');

    // #checkAll제어하기
    let subjects = document.querySelectorAll("[name=subject]");
    for(let i = 0; i < subjects.length; i++){
      if(!subjects[i].checked){
        checkAll.checked = false;
        return;
      }
    }
    checkAll.checked = true;
  }

  function fnCheckAll(){
    // console.log(checkAll.checked);
    let subjects = document.getElementsByName("subject");
    for(let i = 0; i < subjects.length; i++){
      subjects[i].checked = checkAll.checked;
      // 부모 td .on 처리
      let parent = subjects[i].parentElement;
      checkAll.checked ? 
        parent.classList.add("on") : 
          parent.classList.remove("on"); 
    }
  }

  </script>
</body>
</html>